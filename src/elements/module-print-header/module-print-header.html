<link rel="import" href="../../bower-assets/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../behaviors/db-using.html">

<dom-module id="module-print-header">
  <template>

    <style is="custom-style" include="iron-flex">
      :host {
        display: block;
        width: 100%;
      }

      .leftSide {
        margin-left: 6px;
      }

      .rightSide {
        text-align: right;
      }

      .leftSideLine1 {
        font-size: 24px;
      }

      .rightSideLine1 {
        font-size: 22px;
      }

      .logo {
        max-width: 256px;
        max-height: 128px;
      }
      
      .header {
        position: relative;
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        overflow: hidden;
        font-size: 20px;
        font-weight: 500;
        text-align: center;        
        border-bottom: 1px solid #eeeeee;
        background-color: #fafafa;
        padding: 16px
      }      
    </style>

    <section>

      <template is="dom-if" if="[[settings.printDecoration.headerLine]]">
        <div class="header vertical layout">[[settings.printDecoration.headerLine]]</div>
      </template>

      <div class="layout horizontal">

        <template is="dom-if" if="[[organization.printSettings.headerLogoDataUri]]">
          <img class="logo" src="[[organization.printSettings.headerLogoDataUri]]" alt="">
        </template>

        <div class="leftSide vertical layout">
          <div class="leftSideLine1">[[settings.printDecoration.leftSideLine1]]</div>
          <div class="leftSideLine2">[[settings.printDecoration.leftSideLine2]]</div>
          <div class="leftSideLine3">[[settings.printDecoration.leftSideLine3]]</div>
        </div>
        <div class="flex"></div>
        <div class="rightSide vertical layout end">
          <div class="rightSideLine1">[[settings.printDecoration.rightSideLine1]]</div>
          <div class="rightSideLine2">[[settings.printDecoration.rightSideLine2]]</div>
          <div class="rightSideLine3">[[settings.printDecoration.rightSideLine3]]</div>
        </div>
      </div>

    </section>

  </template>

  <script>
    Polymer({
      is: 'module-print-header',
      behaviors: [app.behaviors.dbUsing],
      properties: {
        settings: {
          type: Object,
          notify: true,
          value: null
        }
      },

      attached() {
        let list = app.db.find('settings', ({ serial }) => serial === this.getSerialForSettings())
        if (list.length) this.set('settings', list[0]);
      }

    })
  </script>

</dom-module>